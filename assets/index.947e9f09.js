var p=Object.defineProperty;var l=(o,e,i)=>e in o?p(o,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[e]=i;var h=(o,e,i)=>(l(o,typeof e!="symbol"?e+"":e,i),i);import{P as n}from"./vendor.c2cc9365.js";const g=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}};g();var m={type:n.AUTO,parent:"game",pixelArt:!0,scale:{width:window.innerWidth,height:window.innerHeight,mode:n.Scale.FIT,autoCenter:n.Scale.CENTER_BOTH},physics:{default:"matter",matter:{gravity:{y:3}}}};class f{constructor(e){h(this,"scene");this.scene=e}scaleToGameW(e,i){e.displayWidth=this.scene.game.config.width*i,e.scaleY=e.scaleX}scaleToGameH(e,i){e.displayHeight=this.scene.game.config.height*i,e.scaleX=e.scaleY}centerH(e){e.x=this.scene.game.config.width/2-e.displayWidth/2}centerV(e){e.y=this.scene.game.config.height/2-e.displayHeight/2}center2(e){e.x=this.scene.game.config.width/2-e.displayWidth/2,e.y=this.scene.game.config.height/2-e.displayHeight/2}center(e){e.x=this.scene.game.config.width/2,e.y=this.scene.game.config.height/2}}class u{constructor(e){h(this,"config");h(this,"scene");h(this,"cw");h(this,"ch");h(this,"graphics");if(this.config=e,!e.scene){console.log("missing scene");return}e.rows||(e.rows=5),e.cols||(e.cols=5),e.height||(e.height=this.config.scene.config.height),e.width||(e.width=this.config.scene.config.width),this.scene=e.scene,this.cw=e.width/e.cols,this.ch=e.height/e.rows}show(){this.graphics=this.scene.add.graphics(),this.graphics.lineStyle(2,16711680);for(var e=0;e<this.config.width;e+=this.cw)this.graphics.moveTo(e,0),this.graphics.lineTo(e,this.config.height);for(var e=0;e<this.config.height;e+=this.ch)this.graphics.moveTo(0,e),this.graphics.lineTo(this.config.width,e);this.graphics.strokePath()}placeAt(e,i,s){var t=this.cw*e+this.cw/2,r=this.ch*i+this.ch/2;s.x=t,s.y=r}placeAtOriginTop(e,i,s){var t=this.cw*e+this.cw/2,r=this.ch*i+this.ch/2,c=s.body.bounds,a=c.max.y-c.min.y,d=a/2;s.x=t,s.y=r+d}placeAtOriginBottom(e,i,s){var t=this.cw*e+this.cw/2,r=this.ch*i+this.ch/2,c=s.body.bounds,a=c.max.y-c.min.y,d=a/2;s.x=t,s.y=r-d}placeAtIndex(e,i){var s=Math.floor(e/this.config.cols),t=e-s*this.config.cols;this.placeAt(t,s,i)}showNumbers(){this.show();for(var e=0,i=0;i<this.config.rows;i++)for(var s=0;s<this.config.cols;s++){var t=this.scene.add.text(0,0,e,{color:"#ff0000"});t.setOrigin(.5,.5),this.placeAtIndex(e,t),e++}}}class y extends n.Scene{constructor(){super("GameScene");h(this,"aGrid");h(this,"align");h(this,"rows");h(this,"cols");h(this,"pipe");h(this,"pipes");h(this,"bird");this.rows=11,this.cols=11,this.align=new f(this),this.aGrid=new u({scene:this,rows:this.rows,cols:this.cols,width:innerWidth,height:innerHeight})}init(){this.pipes=[]}preload(){this.load.image("background","assets/Background2.png"),this.load.spritesheet("bird","assets/bird3.png",{frameWidth:16,frameHeight:16}),this.load.image("pipe","assets/pipe.png")}create(){const e=this.add.image(0,0,"background");this.align.scaleToGameH(e,1),this.align.center(e),this.pipes.push(new v(this,"pipe")),this.bird=new w(this,"bird"),this.input.on("pointerdown",()=>{this.bird.fly()})}update(){this.pipes.forEach(e=>{e.update(),e.offscreen()&&e.reset()})}}class w{constructor(e,i){h(this,"scene");h(this,"bird");this.scene=e,this.bird=this.scene.matter.add.sprite(0,0,i,0),this.bird.setBody({type:"circle",radius:5}),this.bird.setFixedRotation(),this.scene.align.scaleToGameH(this.bird,.06),this.scene.aGrid.placeAt(2,2,this.bird)}fly(){this.scene.matter.body.setVelocity(this.bird.body,{x:0,y:-10})}}class v{constructor(e,i){h(this,"scene");h(this,"pipeTop");h(this,"pipeBottom");h(this,"posY");h(this,"bounds");h(this,"width");this.scene=e;let s={isStatic:!0};this.posY=Math.random()*8,this.pipeTop=this.scene.matter.add.image(0,0,i,0,s),this.pipeBottom=this.scene.matter.add.image(0,0,i,0,s),this.scene.align.scaleToGameH(this.pipeTop,1),this.scene.align.scaleToGameH(this.pipeBottom,1),this.scene.aGrid.placeAtOriginBottom(12,this.posY,this.pipeTop),this.scene.aGrid.placeAtOriginTop(12,this.posY+3,this.pipeBottom),this.bounds=this.pipeTop.body.bounds,this.width=this.bounds.max.x-this.bounds.min.x}test(){}offscreen(){return this.pipeTop.x<-this.width}reset(){this.posY=Math.random()*8,this.scene.aGrid.placeAtOriginBottom(12,this.posY,this.pipeTop),this.scene.aGrid.placeAtOriginTop(12,this.posY+3,this.pipeBottom)}update(){this.scene.matter.body.translate(this.pipeTop.body,{x:-3,y:0}),this.scene.matter.body.translate(this.pipeBottom.body,{x:-3,y:0})}}new n.Game(Object.assign(m,{scene:[y]}));
